/**
* Sutton SignWriting JavaScript Library v2.3.1
* https://github.com/Slevinski/SuttonSignWriting
* Copyright (c) 2007-2018, Stephen E Slevinski Jr
* SuttonSignWriting.min.js is released under the MIT License.
*/
var ssw={re:{fsw:{sign:"(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*",spatial:"S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}",symbol:"S[123][0-9a-f]{2}[0-5][0-9a-f]",coord:"[0-9]{3}x[0-9]{3}",sort:"A",box:"[BLMR]",query:"Q((A(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})+)?T)?((R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?)|(S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?))*(V[0-9]+)?-?"},swu:{sign:"(\uD836\uDC00(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FB][\uDC00-\uDFFF])|(\uD8FC[\uDC00-\uDEA0])))+)?\uD836[\uDC01-\uDC04](\uD836[\uDC0C-\uDDFF]){2}(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FA][\uDC00-\uDFFF])|(\uD8FB[\uDC00-\uDFA0]))(\uD836[\uDC0C-\uDDFF]){2})*",spatial:"((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))(\uD836[\uDC0C-\uDDFF]){2}",symbol:"((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))",coord:"(\uD836[\uDC0C-\uDDFF]){2}",sort:"\uD836\uDC00",box:"\uD836[\uDC01-\uDC04]",query:"Q((A(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?|R((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80])))+)?T)?((R((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))(\uD836[\uDC0C-\uDDFF]\uD836[\uDC0C-\uDDFF])?)|(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?(\uD836[\uDC0C-\uDDFF]\uD836[\uDC0C-\uDDFF])?))*(V[0-9]+)?-?"},style:"-C?(P[0-9]{2})?(G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_)?(D_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)?(Z([0-9]+(.[0-9]+)?|x))?(-(D[0-9]{2}_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)*(Z[0-9]{2},[0-9]+(.[0-9]+)?(,[0-9]{3}x[0-9]{3})?)*)?(--?[_a-zA-Z][_a-zA-Z0-9-]{0,100}( -?[_a-zA-Z][_a-zA-Z0-9-]{0,100})*!([a-zA-Z][_a-zA-Z0-9-]{0,100}!)?)?"},encode:function(s){return s=s.replace(/[\u007F-\uFFFF]/g,function(s){return"\\u"+("0000"+s.charCodeAt(0).toString(16)).substr(-4).toUpperCase()})},decode:function(s){return s=s.replace(/\\u([0-9A-F]{4})/g,function(s,e){return String.fromCharCode(parseInt(e,16))})},pair:function(s){var e;"swu"==ssw.chars(s)&&(s=ssw.swu2hex(s));if(!s.match(new RegExp("[0-9A-F]{5}")))return!1;e=parseInt(s,16);var r=String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023));return!(!s||2!=r.length)&&[r.charCodeAt(0).toString(16).toUpperCase(),r.charCodeAt(1).toString(16).toUpperCase()]},chars:function(s){if(!s)return"";if(e="^[A-F0-9]{5}",s.match(new RegExp(e)))return"hex";e="^[ABLMRSxa-f0-9]{5,}";if(s.match(new RegExp(e)))return"fsw";if(e="^[0-9]{3}",s.match(new RegExp(e)))return"num";var e="^((\uD836[\uDC00-\uDDFF])|(\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))+";return s.match(new RegExp(e))?"swu":""},parse:function(s,e,r){var a,t,n,i,w=e||r?"":"^";switch(e||ssw.chars(s)){case"hex":a=w+"[A-F0-9]{5}";var f=s.match(new RegExp(a,r?"g":""));if(f)return i={chars:"hex",hex:f[0]},r?i.all=f:i.line=s,i;break;case"num":a=w+"[0-9]{3}";var c=s.match(new RegExp(a,r?"g":""));if(c)return i={chars:"num",num:c[0]},r?i.all=c:i.line=s,i;break;case"fsw":if(a=r?w+"("+ssw.re.fsw.sign+"("+ssw.re.style+")?|"+ssw.re.fsw.spatial+"("+ssw.re.style+")?)":w+ssw.re.fsw.sign+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"sign"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.spatial+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"spatial"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.symbol+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"symbol"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.coord,t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"coord",fsw:t[0]},r?i.all=t:i.line=s,i;break;case"swu":if(a=r?w+"("+ssw.re.swu.sign+"("+ssw.re.style+")?|"+ssw.re.swu.spatial+"("+ssw.re.style+")?)":w+ssw.re.swu.sign+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"sign"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.spatial+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"spatial"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.symbol+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"symbol"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.coord,t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"coord",swu:t[0]},r?i.all=t:i.line=s,i}return!1},fsw2swu:function(s){if(!s)return"";var e,r,a,t=parseInt("1D800",16),n=s.replace(/B/g,"B!"),i=(n=(n=(n=(n=(n=n.replace(/A/g,String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)))).replace(/B!/g,String.fromCharCode(55296+(t+1-65536>>10),56320+(t+1-65536&1023)))).replace(/L/g,String.fromCharCode(55296+(t+2-65536>>10),56320+(t+2-65536&1023)))).replace(/M/g,String.fromCharCode(55296+(t+3-65536>>10),56320+(t+3-65536&1023)))).replace(/R/g,String.fromCharCode(55296+(t+4-65536>>10),56320+(t+4-65536&1023)))).match(new RegExp(ssw.re.fsw.coord,"g"));f=i?i.length:0;var w;for(w=0;w<f;w+=1)r=(r=(e=i[w]).split("x")).map(function(s){return s=120844+parseInt(s)-250,String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023))}),n=n.replace(e,r.join(""));var f=(i=n.match(new RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f]","g")))?i.length:0;for(w=0;w<f;w+=1)a=i[w],n=n.replace(a,ssw.uni(a,"4"));return n},swu2fsw:function(s){if(!s)return"";var e=s.replace(/ð €/g,"A").replace(/ð /g,"B").replace(/ð ‚/g,"L").replace(/ð ƒ/g,"M").replace(/ð „/g,"R"),r=e.match(new RegExp(ssw.re.swu.symbol,"g"));r&&r.forEach(function(s){var r=ssw.swu2hex(s),a=parseInt(r.slice(1),16)-1,t=parseInt(a/96),n="S"+(t+256).toString(16),i=parseInt((a-96*t)/16);n+=i.toString(16),n+=parseInt(a-96*t-16*i).toString(16),e=e.replace(s,n)});var a=e.match(new RegExp(ssw.re.swu.coord,"g"));return a&&a.forEach(function(s){var r=parseInt(ssw.swu2hex(s.slice(0,2)),16)-120844+250,a=parseInt(ssw.swu2hex(s.slice(2,4)),16)-120844+250;if(!(r>=250&&r<749&&a>=250&&a<749))throw"invalid numbers: "+r+", "+a;e=e.replace(s,r+"x"+a)}),e},swu2hex:function(s){if(s.codePointAt(0)){var e=s.codePointAt(0).toString(16).toUpperCase();return!(e.length<=4)&&e}return!1},symbol:function(s,e){var r;switch(ssw.parse(s).chars){case"swu":r=ssw.re.swu.symbol+"("+ssw.re.swu.coord+")?";break;case"fsw":r=ssw.re.fsw.symbol+"("+ssw.re.fsw.coord+")?";break;default:return""}e&&(r+="("+ssw.re.style+")?");var a=s.match(new RegExp(r));return a?a[0]:""},sign:function(s,e){var r;switch(ssw.parse(s).chars){case"swu":r=ssw.re.swu.sign;break;case"fsw":r=ssw.re.fsw.sign;break;default:return""}e&&(r+="("+ssw.re.style+")?");var a=s.match(new RegExp(r));return a?a[0]:ssw.symbol(s,e)},mirror:function(s){s=ssw.symbol(s);var e,r=ssw.parse(s);switch(r.chars){case"swu":e=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":e=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";var a,t=s.slice(0,4),n=s.slice(4,5),i=parseInt(s.slice(5,6),16),w=t+"08",f=t+"18";for(ssw.size(w)||ssw.size(f)?a=8:(0!==i&&4!=i||(a=0),1!=i&&5!=i||(a=6),2!=i&&6!=i||(a=4),3!=i&&7!=i||(a=2)),s="";!ssw.size(s);)(i+=a)>7&&a<8&&(i-=8),i>15&&(i-=16),s=t+n+i.toString(16);return"swu"==r.chars&&(s=ssw.fsw2swu(s)),s+e},fill:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=s.slice(0,4),n=parseInt(s.slice(4,5)),i=s.slice(5,6);for(s="";!ssw.size(s);)(n+=e)>5&&(n=0),n<0&&(n=5),s=t+n+i;return"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},rotate:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=s.slice(0,4),n=s.slice(4,5),i=parseInt(s.slice(5,6),16);for(s="";!ssw.size(s);)i>7?((i+=e)>15&&(i=8),i<8&&(i=15),s=t+n+i.toString(16)):((i-=e)>7&&(i=0),i<0&&(i=7),s=t+n+i);return"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},scroll:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=parseInt(s.slice(1,4),16)+e,n=s.slice(4,5),i=s.slice(5,6),w="S"+t.toString(16)+n+i;return ssw.size(w)?s=w:(w=ssw.view(w),ssw.size(w)&&(s=w)),"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},structure:function(s,e,r){switch(e=ssw.symbol(e),ssw.parse(e).chars){case"swu":e=ssw.swu2fsw(e)}var a={kind:["S100","S37f","S387"],category:["S100","S205","S2f7","S2ff","S36d","S37f","S387"],group:["S100","S10e","S11e","S144","S14c","S186","S1a4","S1ba","S1cd","S1f5","S205","S216","S22a","S255","S265","S288","S2a6","S2b7","S2d5","S2e3","S2f7","S2ff","S30a","S32a","S33b","S359","S36d","S376","S37f","S387"]}[s];if(!a)return e?"is"!=r&&"":[];if(!e&&!r)return a;r||(r="");var t;switch(r){case"is":return-1!=a.indexOf(e.slice(0,4));case"first":return a[0];case"last":return a.slice(-1)[0];case"prev":t=-2;break;case"":t=-1;break;case"next":t=0;break;default:return""}var n,i=a.length;for(n=0;n<a.length;n+=1)if(parseInt(e.slice(1,4),16)<parseInt(a[n].slice(1,4),16)){i=n;break}return i+=t,i=i<0?0:i>=a.length?a.length-1:i,a[i]},type:function(s){var e,r;switch(s){case"writing":e="100",r="37e";break;case"hand":e="100",r="204";break;case"movement":e="205",r="2f6";break;case"dynamic":e="2f7",r="2fe";break;case"head":case"hcenter":e="2ff",r="36c";break;case"vcenter":e="2ff",r="375";break;case"trunk":e="36d",r="375";break;case"limb":e="376",r="37e";break;case"location":e="37f",r="386";break;case"punctuation":e="387",r="38b";break;default:e="100",r="38b"}return[e,r]},is:function(s,e){switch(s=ssw.symbol(s),ssw.parse(s).chars){case"swu":s=ssw.swu2fsw(s);case"fsw":break;default:return!1}var r=ssw.type(e),a=r[0],t=r[1],n=s.slice(1,4);return parseInt(a,16)<=parseInt(n,16)&&parseInt(t,16)>=parseInt(n,16)},filter:function(s,e){var r;switch(ssw.chars(s)){case"swu":r=ssw.parse(s,"swu","spatials"),s=ssw.swu2fsw((r.all||[]).join(""));break;case"fsw":s=((r=ssw.parse(s,"fsw","spatials")).all||[]).join("");break;default:return""}var a=ssw.type(e),t=a[0],n=a[1],i="S"+ssw.range(t,n,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",w=s.match(new RegExp(i,"g"));return w?(s=w.join(""),"swu"==r.chars&&(s=ssw.fsw2swu(s)),s):""},random:function(s,e){var r=ssw.type(s),a=r[0],t=r[1],n=Math.floor(Math.random()*(parseInt(t,16)-parseInt(a,16)+1)+parseInt(a,16)),i=Math.floor(6*Math.random()),w=Math.floor(16*Math.random()),f="S"+n.toString(16)+i.toString(16)+w.toString(16);return ssw.size(f)?e?ssw.fsw2swu(f):f:ssw.random(s,e)},colorize:function(s){s=ssw.symbol(s),"swu"==ssw.chars(s)&&(s=ssw.swu2fsw(s));var e="000000";return ssw.is(s,"hand")&&(e="0000CC"),ssw.is(s,"movement")&&(e="CC0000"),ssw.is(s,"dynamic")&&(e="FF0099"),ssw.is(s,"head")&&(e="006600"),ssw.is(s,"location")&&(e="884411"),ssw.is(s,"punctuation")&&(e="FF9900"),e},view:function(s,e){s=ssw.symbol(s);var r=ssw.chars(s);if("swu"==r&&(s=ssw.swu2fsw(s)),!ssw.is(s))return"";var a=s.slice(0,4);return s=e?a+(ssw.size(a+"00")?"0":"1")+"0":a+(ssw.is(s,"hand")&&!ssw.structure("group",s,"is")?"1":"0")+"0","swu"==r?ssw.fsw2swu(s):s},uni:function(s,e,r){var a,t,n,i=ssw.parse(s);switch(i.chars){case"swu":a=ssw.re.swu.symbol;break;case"fsw":a=ssw.re.fsw.symbol;break;case"hex":a="[0-9A-F]{5}";break;default:return!1}var w,f=s.match(new RegExp(a,"g")),c=f?f.length:0;for(t=0;t<c;t+=1){switch(n=f[t],i.chars){case"swu":n=ssw.swu2fsw(n);case"fsw":w=parseInt(e+"0000",16)+96*(parseInt(n.slice(1,4),16)-256)+16*parseInt(n.slice(4,5),16)+parseInt(n.slice(5,6),16)+1;break;case"hex":w=parseInt(n,16)}n=n.replace(n.substr(0,6),r?w.toString(16).toUpperCase():String.fromCharCode(55296+(w-65536>>10),56320+(w-65536&1023))),s=s.replace(f[t],n)}return s},bbox:function(s){var e=ssw.chars(s);"swu"==e&&(s=ssw.swu2fsw(s));var r,a,t,n,i,w,f=/[0-9]{3}x[0-9]{3}/g,c=s.match(f);if(c){var l;for(l=0;l<c.length;l+=1)r=parseInt(c[l].slice(0,3)),a=parseInt(c[l].slice(4,7)),0===l?(t=r,n=r,i=a,w=a):(t=Math.min(t,r),n=Math.max(n,r),i=Math.min(i,a),w=Math.max(w,a));return t==n&&i==w&&(t>500?t=1e3-t:n=1e3-n,i>500?i=1e3-i:w=1e3-w),"swu"==e?ssw.fsw2swu(t+"x"+n+i+"x"+w):t+" "+n+" "+i+" "+w}return""},displace:function(s,e,r){var a=ssw.chars(s);"swu"==a&&(s=ssw.swu2fsw(s));var t,n,i=s.match(new RegExp("[0-9]{3}x[0-9]{3}","g"));if(i){var w;for(w=0;w<i.length;w+=1)t=parseInt(i[w].slice(0,3))+e,n=parseInt(i[w].slice(4,7))+r,s=s.replace(i[w],t+"X"+n);s=s.replace(/X/g,"x")}return"swu"==a?ssw.fsw2swu(s):s},sizes:{},size:function(s){var e=ssw.parse(s);switch(e.chars){case"swu":s=ssw.swu2fsw(s);break;case"fsw":break;default:return!1}if("sign"==e.type||"spatial"==e.type){var r=ssw.bbox(ssw.sign(s)),a=(r=r.split(" "))[0],t=r[1],n=r[2];return c=t-a+"x"+(r[3]-n),"0x0"==c?"":c}ssw.sign(s);var i,w,f,c,l=ssw.symbol(s);if(!l)return"";if(ssw.sizes[l])return ssw.sizes[l];var u,p;ssw.canvaser||(ssw.canvaser=document.createElement("canvas"),ssw.canvaser.width=152,ssw.canvaser.height=152);var o=ssw.canvaser.getContext("2d");o.clearRect(0,0,152,152),o.font="60px 'SuttonSignWritingLine'",o.fillText(ssw.uni(l,"F"),0,0),u=o.getImageData(0,0,152,152).data;s:for(i=151;i>=0;i--)for(w=0;w<152;w+=1)for(f=0;f<4;f+=1)if(p=4*i+4*w*152+f,u[p])break s;var g=i;s:for(w=151;w>=0;w--)for(i=0;i<g;i+=1)for(f=0;f<4;f+=1)if(p=4*i+4*w*152+f,u[p])break s;var Z=w+1;if(g=""+Math.ceil(g/2),Z=""+Math.ceil(Z/2),"S19559".indexOf(l)>-1&&(g="19"),"S16d03 S16d0f S16d1f S16d2f S16d23 S16d43 S16d53 S1710d S1711d S1712d S17311 S17321 S17733 S1773f S17743 S1774f S17753 S1775f S16d33 S1713d S1714d S17301 S17329 S1715d".indexOf(l)>-1&&(g="20"),"S24c15 S24c30".indexOf(l)>-1&&(g="22"),"S2903b".indexOf(l)>-1&&(g="23"),"S1d203 S1d233".indexOf(l)>-1&&(g="25"),"S24c15".indexOf(l)>-1&&(g="28"),"S2e629".indexOf(l)>-1&&(g="29"),"S23425".indexOf(l)>-1&&(g="30"),"S2d316".indexOf(l)>-1&&(g="40"),"S2541a".indexOf(l)>-1&&(g="50"),"S1732f S17731 S17741 S17751".indexOf(l)>-1&&(Z="20"),"S1412c".indexOf(l)>-1&&(Z="21"),"S2a903".indexOf(l)>-1&&(Z="31"),"S2b002".indexOf(l)>-1&&(Z="36"),"0x0"==(c=g+"x"+Z)){var h="S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ",x=h.indexOf(l);if(-1==x)c="";else{var d=h.indexOf(" ",x);c=h.slice(x+6,d)}}else ssw.sizes[l]=c;return c},max:function(s,e){var r=ssw.chars(s);"swu"==r&&(s=ssw.swu2fsw(s));var a=ssw.type(e),t=a[0],n=a[1],i="S"+ssw.range(t,n,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",w=s.match(new RegExp(i,"g"));if(w){var f,c,l,u,p,o="";for(p=0;p<w.length;p+=1)f=w[p].slice(0,6),c=parseInt(w[p].slice(6,9)),l=parseInt(w[p].slice(10,13)),u=ssw.size(f).split("x"),o+=f+c+"x"+l+(c+parseInt(u[0]))+"x"+(l+parseInt(u[1]));return"swu"==r?ssw.fsw2swu(o):o}return""},norm:function(s){var e=ssw.chars(s);"swu"==e&&(s=ssw.swu2fsw(s));var r,a,t,n,i=ssw.bbox(ssw.max(s,"hcenter")),w=ssw.bbox(ssw.max(s,"vcenter")),f=ssw.bbox(ssw.max(s));if(!f)return"";w?(r=parseInt(w.slice(0,3)),a=parseInt(w.slice(4,7))):(r=parseInt(f.slice(0,3)),a=parseInt(f.slice(4,7))),i?(t=parseInt(i.slice(8,11)),n=parseInt(i.slice(12,15))):(t=parseInt(f.slice(8,11)),n=parseInt(f.slice(12,15)));var c=500-parseInt((r+a)/2),l=500-parseInt((t+n)/2),u=s.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]/);return u=u?u[0]:"M",s=u+parseInt(f.slice(4,7))+"x"+parseInt(f.slice(12,15))+ssw.filter(s),s=ssw.displace(s,c,l),"swu"==e?ssw.fsw2swu(s):s},svg:function(s,e){var r=ssw.sign(s,!0),a=ssw.parse(r),t=a.chars;if("swu"==t&&(r=ssw.swu2fsw(r)),!r)return"";var n;(w=r.indexOf("-"))>-1&&(n=r.slice(w));var i,w,f,c,l,u;if("symbol"==a.type){var p=ssw.symbol(r);if(!(f=ssw.size(p)))return"";r=6==p.length?p+"500x500":p}if(e||(e={}),e.size?e.size=parseFloat(e.size)||"x":e.size=1,e.colorize?e.colorize=!0:e.colorize=!1,e.pad?e.pad=parseInt(e.pad):e.pad=0,e.line?e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.line)?"#"+e.line:e.line:e.line="black",e.fill?e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.fill)?"#"+e.fill:e.fill:e.fill="white",e.back?e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.back)?"#"+e.back:e.back:e.back="",e.E=[],e.F=[],e.copy=e.copy||t,n){var o;if(i=n.split("-"),o=i[1].match(/C/),e.colorize=!!o,(o=i[1].match(/P[0-9]{2}/))&&(e.pad=parseInt(o[0].substring(1,o[0].length))),o=i[1].match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var g=o[0].substring(2,o[0].length-1);e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(g)?"#"+g:g}if((o=i[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/))&&((c=o[0].substring(2,o[0].length-1).split(","))[0]&&(e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[0])?"#"+c[0]:c[0]),c[1]&&(e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[1])?"#"+c[1]:c[1])),(o=i[1].match(/Z([0-9]+(\.[0-9]+)?|x)/))&&(e.size=parseFloat(o[0].substring(1,o[0].length))||"x"),i[2]||(i[2]=""),o=i[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(l=0;l<o.length;l+=1)w=parseInt(o[l].substring(1,3)),(c=o[l].substring(4,o[l].length-1).split(","))[0]&&(c[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[0])?"#"+c[0]:c[0]),c[1]&&(c[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[1])?"#"+c[1]:c[1]),e.E[w]=c;if(o=i[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(l=0;l<o.length;l+=1)w=parseInt(o[l].substring(1,3)),(u=o[l].substring(4,o[l].length).split(","))[0]=parseFloat(u[0]),e.F[w]=u;i.length>3&&(i=i.slice(3).join("-").split("!"),e.class=i[0]?i[0]:"",e.id=i[1]?i[1]:"")}var Z,h,x,d=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,F={};F.L=-1,F.R=1;var D,b,S,m,C,v,I=500,y=500,U=500,A=500;S=r.charAt(0);var k=ssw.bbox(r);k=k.split(" "),I=parseInt(k[0]),y=parseInt(k[1]),U=parseInt(k[2]),A=parseInt(k[3]),"S"==S&&(500==I&&500==U?(u=f.split("x"),y=500+parseInt(u[0]),A=500+parseInt(u[1])):(y=1e3-I,A=1e3-U)),(h=r.match(d))||(h=[]);var z;for(l=0;l<h.length;l+=1)Z=h[l].slice(0,6),D=h[l].slice(6,9),b=h[l].slice(10,13),e.F[l+1]&&(e.F[l+1][1]&&(D=parseInt(D)+parseInt(e.F[l+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[l+1][1].slice(4,7))-500,I=Math.min(I,D),U=Math.min(U,b)),(z=ssw.size(Z))&&(z=z.split("x"),y=Math.max(y,parseInt(D)+e.F[l+1][0]*parseInt(z[0])),A=Math.max(A,parseInt(b)+e.F[l+1][0]*parseInt(z[1])))),x='<g transform="translate('+D+","+(b=parseInt(b))+')">',x+="<text ",x+='class="sym-fill" ',e.css||(x+="style=\"pointer-events:none;font-family:'SuttonSignWritingFill';font-size:"+(e.F[l+1]?30*e.F[l+1][0]:30)+"px;fill:"+(e.E[l+1]&&e.E[l+1][1]?e.E[l+1][1]:e.fill)+";",x+='"'),x+=">",x+=ssw.uni(Z,"10"),x+="</text>",x+="<text ",x+='class="sym-line" ',e.css||(x+='style="pointer-events:none;',x+="font-family:'SuttonSignWritingLine';font-size:"+(e.F[l+1]?30*e.F[l+1][0]:30)+"px;fill:"+(e.E[l+1]?e.E[l+1][0]:e.colorize?"#"+ssw.colorize(Z):e.line)+";",x+='"'),x+=">",x+=ssw.uni(Z,"F"),x+="</text>",x+="</g>",h[l]=x;I-=e.pad,y+=e.pad,U-=e.pad,m=y-I,C=(A+=e.pad)-U,v=75*(v=F[S]||0)+I-400;var R="<svg ";return e.class&&(R+='class="'+e.class+'" '),e.id&&(R+='id="'+e.id+'" '),R+='version="1.1" xmlns="http://www.w3.org/2000/svg" ',"x"!=e.size&&(R+='width="'+m*e.size+'" height="'+C*e.size+'" '),R+='viewBox="'+I+" "+U+" "+m+" "+C+'">',R+='<text style="font-size:0%;">',"swu"==e.copy?R+=ssw.fsw2swu(r):R+=s,R+="</text>",e.back&&(R+='  <rect x="'+I+'" y="'+U+'" width="'+m+'" height="'+C+'" style="fill:'+e.back+';" />'),R+=h.join("")+"</svg>",e.laned&&(R='<div style="padding:10px;position:relative;width:'+m+"px;height:"+C+"px;left:"+v+'px;">'+R+"</div>"),R},canvas:function(s,e){var r=document.createElement("canvas"),a=ssw.sign(s,!0),t=ssw.parse(a);"swu"==ssw.chars(a)&&(a=ssw.swu2fsw(a));var n;(p=a.indexOf("-"))>-1&&(n=a.slice(p));var i,w,f,c,l,u,p;if("symbol"==t.type){var o=ssw.symbol(a);if(f=ssw.size(o),!o)return"";a=6==o.length?o+"500x500":o}if(e||(e={}),e.size?e.size=parseFloat(e.size):e.size=1,e.colorize?e.colorize=!0:e.colorize=!1,e.pad?e.pad=parseInt(e.pad):e.pad=0,e.line?e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.line)?"#"+e.line:e.line:e.line="black",e.fill?e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.fill)?"#"+e.fill:e.fill:e.fill="white",e.back?e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.back)?"#"+e.back:e.back:e.back="",e.E=[],e.F=[],n){var g;if(i=n.split("-"),g=i[1].match(/C/),e.colorize=!!g,(g=i[1].match(/P[0-9]{2}/))&&(e.pad=parseInt(g[0].substring(1,g[0].length))),g=i[1].match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var Z=g[0].substring(2,g[0].length-1);e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(Z)?"#"+Z:Z}if((g=i[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/))&&((w=g[0].substring(2,g[0].length-1).split(","))[0]&&(e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[0])?"#"+w[0]:w[0]),w[1]&&(e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[1])?"#"+w[1]:w[1])),(g=i[1].match(/Z[0-9]+(\.[0-9]+)?/))&&(e.size=g[0].substring(1,g[0].length)),i[2]||(i[2]=""),g=i[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(u=0;u<g.length;u+=1)p=parseInt(g[u].substring(1,3)),(w=g[u].substring(4,g[u].length-1).split(","))[0]&&(w[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[0])?"#"+w[0]:w[0]),w[1]&&(w[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[1])?"#"+w[1]:w[1]),e.E[p]=w;if(g=i[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(u=0;u<g.length;u+=1)p=parseInt(g[u].substring(1,3)),(l=g[u].substring(4,g[u].length).split(","))[0]=parseFloat(l[0]),e.F[p]=l}var h,x,d=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,F={};F.L=-1,F.R=1;var D,b,S,m,C,v=500,I=500,y=500,U=500;S=a.charAt(0);var A=ssw.bbox(a);A=A.split(" "),v=parseInt(A[0]),I=parseInt(A[1]),y=parseInt(A[2]),U=parseInt(A[3]),"S"==S&&(500==v&&500==y?(l=f.split("x"),I=500+parseInt(l[0]),U=500+parseInt(l[1])):(I=1e3-v,U=1e3-y));var k=(x=a.match(d))?x.length:0;for(u=0;u<k;u+=1)h=x[u].slice(0,6),D=x[u].slice(6,9),b=x[u].slice(10,13),e.F[u+1]&&(e.F[u+1][1]&&(D=parseInt(D)+parseInt(e.F[u+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[u+1][1].slice(4,7))-500,v=Math.min(v,D),y=Math.min(y,b)),(c=ssw.size(h))&&(c=c.split("x"),I=Math.max(I,parseInt(D)+e.F[u+1][0]*parseInt(c[0])),U=Math.max(U,parseInt(b)+e.F[u+1][0]*parseInt(c[1]))));v-=e.pad,I+=e.pad,y-=e.pad,U+=e.pad,m=(I-v)*e.size,C=(U-y)*e.size,r.width=m||1,r.height=C||1;var z=r.getContext("2d");for(e.back&&(z.rect(0,0,m,C),z.fillStyle=e.back,z.fill()),x=a.match(d),u=0;u<k;u+=1)h=x[u].slice(0,6),D=x[u].slice(6,9),b=x[u].slice(10,13),e.F[u+1]&&(e.F[u+1][1]&&(D=parseInt(D)+parseInt(e.F[u+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[u+1][1].slice(4,7))-500,v=Math.min(v,D),y=Math.min(y,b)),(c=ssw.size(h))&&(c=c.split("x"),I=Math.max(I,parseInt(D)+e.F[u+1][0]*parseInt(c[0])),U=Math.max(U,parseInt(b)+e.F[u+1][0]*parseInt(c[1])))),z.font=(e.F[u+1]?30*e.size*e.F[u+1][0]:30*e.size)+"px 'SuttonSignWritingFill'",z.fillStyle=e.E[u+1]&&e.E[u+1][1]?e.E[u+1][1]:e.fill,z.fillText(ssw.uni(h,"10"),(D-v)*e.size,(b-y)*e.size),z.font=(e.F[u+1]?30*e.size*e.F[u+1][0]:30*e.size)+"px 'SuttonSignWritingLine'",z.fillStyle=e.E[u+1]?e.E[u+1][0]:e.colorize?"#"+ssw.colorize(h):e.line,z.fillText(ssw.uni(h,"F"),(D-v)*e.size,(b-y)*e.size);return r},png:function(s,e){if("swu"==ssw.chars(s)&&(s=ssw.swu2fsw(s)),ssw.sign(s,!0)||ssw.symbol(s,!0)){var r=ssw.canvas(s,e),a=r.toDataURL("image/png");return r.remove(),a}return""},query:function(s){return"-"==s?"-":(s=s.match(new RegExp(ssw.re.fsw.query)),s?s[0]:"")},queryu:function(s){return"-"==s?"-":(s=s.match(new RegExp(ssw.re.swu.query)),s?s[0]:"")},query2swu:function(s){if(!(s=ssw.query(s)))return"";var e,r,a,t,n,i,w,f;if(e=s.match(new RegExp("[0-9]{3}x[0-9]{3}","g")))for(r=0;r<e.length;r+=1)s=s.replace(e[r],ssw.fsw2swu(e[r]));if(e=s.match(new RegExp("R[123][0-9a-f]{2}t[123][0-9a-f]{2}","g")))for(r=0;r<e.length;r+=1)a=ssw.view("S"+e[r].slice(1,4)+"00"),t=ssw.view("S"+e[r].slice(5,8)+"00"),n="R"+ssw.fsw2swu(a)+ssw.fsw2swu(t),s=s.replace(e[r],n);if(e=s.match(new RegExp("S[123][0-9a-f]{2}[0-5u][0-9a-fu]","g")))for(r=0;r<e.length;r+=1)i=e[r].slice(0,4),"u"==(w=e[r].slice(4,5))?(i+=ssw.view(i+"00").slice(4,5),w="f"):(i+=w,w=""),"u"==(f=e[r].slice(5,6))?(i+="0",f="r"):(i+=f,f=""),s=s.replace(e[r],ssw.fsw2swu(i)+w+f);return s},query2fsw:function(s){if(!(s=ssw.queryu(s)))return"";var e,r,a,t,n=ssw.re.swu.symbol,i=ssw.re.swu.coord,w="R"+n+n,f=n+"f?r?";if(e=s.match(new RegExp(i,"g")))for(r=0;r<e.length;r+=1)s=s.replace(e[r],ssw.swu2fsw(e[r]));if(e=s.match(new RegExp(w,"g")))for(r=0;r<e.length;r+=1)a="R"+ssw.swu2fsw(e[r].slice(1,3)).slice(1,4)+"t"+ssw.swu2fsw(e[r].slice(-2)).slice(1,4),s=s.replace(e[r],a);if(e=s.match(new RegExp(f,"g")))for(r=0;r<e.length;r+=1)t=ssw.swu2fsw(e[r].slice(0,2)),e[r].indexOf("f")>-1&&(t=t.slice(0,4)+"u"+t.slice(5,6)),e[r].indexOf("r")>-1&&(t=t.slice(0,5)+"u"),s=s.replace(e[r],t);return s},range:function(s,e,r){var a,t,n,i,w,f,c;if(r||(r=""),s=("000"+s).slice(-3),e=""+e,a="",s===e)return s;if(t=[],(s[0]!=e[0]||s[1]!=e[1])&&"0"!=s[2])if(a=s[0]+s[1],r){switch(s[2]){case"f":a+="f";break;case"e":a+="[ef]";break;case"d":case"c":case"b":case"a":a+="["+s[2]+"-f]";break;default:switch(s[2]){case"9":a+="[9a-f]";break;case"8":a+="[89a-f]";break;default:a+="["+s[2]+"-9a-f]"}}n=15-parseInt(s[2],16)+1,s=""+(parseInt(s,16)+n).toString(16),t.push(a)}else{switch(s[2]){case"9":a+="9";break;case"8":a+="[89]";break;default:a+="["+s[2]+"-9]"}s=""+(1*s+(n=9-s[2]+1)),t.push(a)}if(a="",s[0]!=e[0]&&"0"!=s[1])if(r){switch(a=s[0],s[1]){case"f":a+="f";break;case"e":a+="[ef]";break;case"d":case"c":case"b":case"a":a+="["+s[1]+"-f]";break;case"9":a+="[9a-f]";break;case"8":a+="[89a-f]";break;default:a+="["+s[1]+"-9a-f]"}a+="[0-9a-f]",n=15-parseInt(s[1],16)+1,s=""+(parseInt(s,16)+16*n).toString(16),t.push(a)}else{switch(a=s[0],n=9-s[1]+1,s[1]){case"9":a+="9";break;case"8":a+="[89]";break;default:a+="["+s[1]+"-9]"}a+="[0-9]",s=""+(1*s+10*(n=9-s[1]+1)),t.push(a)}if(a="",s[0]!=e[0])if(r){switch(n=parseInt(e[0],16)-parseInt(s[0],16),i=(parseInt(s[0],16)+n-1).toString(16),n){case 1:a=s[0];break;case 2:a="["+s[0]+i+"]";break;default:switch(f=parseInt(s[0],16)>9?"h":"d",c=parseInt(i,16)>9?"h":"d",f+c){case"dd":a+="["+s[0]+"-"+i+"]";break;case"dh":switch(n=9-s[0]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[0]+"-9"}switch(i[0]){case"a":a+="a]";break;case"b":a+="ab]";break;default:a+="a-"+i+"]"}break;case"hh":a+="["+s[0]+"-"+i+"]"}}a+="[0-9a-f][0-9a-f]",n=parseInt(e[0],16)-parseInt(s[0],16),s=""+(parseInt(s,16)+256*n).toString(16),t.push(a)}else{switch(n=e[0]-s[0],i=1*s[0]+n-1,n){case 1:a=s[0];break;case 2:a="["+s[0]+i+"]";break;default:a="["+s[0]+"-"+i+"]"}a+="[0-9][0-9]",s=""+(1*s+100*n),t.push(a)}if(a="",s[1]!=e[1])if(r){switch(n=parseInt(e[1],16)-parseInt(s[1],16),i=(parseInt(s[1],16)+n-1).toString(16),a=s[0],n){case 1:a+=s[1];break;case 2:a+="["+s[1]+i+"]";break;default:switch(f=parseInt(s[1],16)>9?"h":"d",c=parseInt(i,16)>9?"h":"d",f+c){case"dd":a+="["+s[1],n>1&&(a+="-"),a+=i+"]";break;case"dh":switch(n=9-s[1]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[1]+"-9"}switch(e[1]){case"a":a+="]";break;case"b":a+="a]";break;default:a+="a-"+(parseInt(e[1],16)-1).toString(16)+"]"}break;case"hh":a+="["+s[1],n>1&&(a+="-"),a+=(parseInt(e[1],16)-1).toString(16)+"]"}}a+="[0-9a-f]",n=parseInt(e[1],16)-parseInt(s[1],16),s=""+(parseInt(s,16)+16*n).toString(16),t.push(a)}else{switch(n=e[1]-s[1],i=1*s[1]+n-1,a=s[0],n){case 1:a+=s[1];break;case 2:a+="["+s[1]+i+"]";break;default:a+="["+s[1]+"-"+i+"]"}a+="[0-9]",s=""+(1*s+10*n),t.push(a)}if(a="",s[2]!=e[2])if(r){switch(a=s[0]+s[1],n=parseInt(e[2],16)-parseInt(s[2],16),f=parseInt(s[2],16)>9?"h":"d",c=parseInt(e[2],16)>9?"h":"d",f+c){case"dd":a+="["+s[2],n>1&&(a+="-"),a+=e[2]+"]";break;case"dh":switch(n=9-s[2]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[2]+"-9"}switch(e[2]){case"a":a+="a]";break;case"b":a+="ab]";break;default:a+="a-"+e[2]+"]"}break;case"hh":a+="["+s[2],n>1&&(a+="-"),a+=e[2]+"]"}n=parseInt(e[2],16)-parseInt(s[2],16),s=""+(parseInt(s,16)+n).toString(16),t.push(a)}else{switch(n=e[2]-s[2],a=s[0]+s[1],n){case 0:a+=s[2];break;case 1:a+="["+s[2]+e[2]+"]";break;default:a+="["+s[2]+"-"+e[2]+"]"}s=""+(1*s+n),t.push(a)}return a="","0"==s[2]&&"0"==e[2]&&(a=e,t.push(a)),a="",w=t.length,a=1==w?t[0]:"(("+(a=t.join(")|("))+"))"},rangeu:function(s,e){e=e||"";var r;switch(ssw.chars(s)){case"fsw":case"num":if(r=(s+"x"+e).split("x"),s=(parseInt("1D906",16)+parseInt(r[0])-500).toString(16),e=(parseInt("1D906",16)+parseInt(r[1])-500).toString(16),s<250||s>749||s<250||s>749)return!1;break;case"swu":if("coord"==(r=ssw.parse(s+e,"swu",!0)).type)s=ssw.swu2hex(r.all[0].substr(0,2)),e=ssw.swu2hex(r.all[0].substr(2,2));else{if("symbol"!=r.type)return!1;if(r.all.length<2)return!1;s=ssw.swu2hex(r.all[0]),e=ssw.swu2hex(r.all[1])}}if(s>e)return"";var a,t,n,i="",w=[];if(t=parseInt(s,16),n=String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)),s=[n.charCodeAt(0).toString(16).toUpperCase(),n.charCodeAt(1).toString(16).toUpperCase()],t=parseInt(e,16),n=String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)),e=[n.charCodeAt(0).toString(16).toUpperCase(),n.charCodeAt(1).toString(16).toUpperCase()],2!=s.length&&2!=e.length)return"";if(s[0]==e[0])s[1]==e[1]?(i="\\u"+s[0]+"\\u"+s[1],w.push(i)):(i="\\u"+s[0]+"[\\u"+s[1]+"-\\u"+e[1]+"]",w.push(i));else{i="DFFF"==s[1]?"\\u"+s[0]+"\\uDFFF":"\\u"+s[0]+"[\\u"+s[1]+"-\\uDFFF]",w.push(i);var f=parseInt(e[0],16)-parseInt(s[0],16);2==f&&(i="\\u"+(parseInt(s[0],16)+1).toString(16).toUpperCase(),i+="[\\uDC00-\\uDFFF]",w.push(i)),f>2&&(i="[",i+="\\u"+(parseInt(s[0],16)+1).toString(16).toUpperCase(),i+="-\\u"+(parseInt(e[0],16)-1).toString(16).toUpperCase(),i+="][\\uDC00-\\uDFFF]",w.push(i)),i="DC00"==e[1]?"\\u"+e[0]+"\\uDC00":"\\u"+e[0]+"[\\uDC00-\\u"+e[1]+"]",w.push(i)}return a=w.length,i=1==a?w[0]:"(("+(i=w.join(")|("))+"))",ssw.decode(i)},ranges:function(s){var e=s.match(new RegExp(ssw.re.swu.symbol+"f?r?"));if(e){var r,a,t=e[0].slice(0,2),n=ssw.swu2fsw(t),i=n.slice(0,4);return"fr"==e[0].slice(-2)?(r=ssw.fsw2swu(i+"00"),a=ssw.fsw2swu(i+"5f"),ssw.rangeu(r,a)):"r"==e[0].slice(-1)?(r=ssw.fsw2swu(n.slice(0,5)+"0"),a=ssw.fsw2swu(n.slice(0,5)+"f"),ssw.rangeu(r,a)):"f"==e[0].slice(-1)?"("+[0,1,2,3,4,5].map(function(s){return ssw.fsw2swu(i+s+n.slice(-1))}).join("|")+")":t}return""},regex:function(s,e){if(!(s=ssw.query(s)))return"";var r,a,t,n,i,w,f,c,l,u,p;e||(e=20);var o,g="S[123][0-9a-f]{2}[0-5][0-9a-f]",Z="[0-9]{3}x[0-9]{3}",h="[BLMR]("+Z+")("+g+Z+")*",x="(A("+g+")+)",d="R[123][0-9a-f]{2}t[123][0-9a-f]{2}",F="S[123][0-9a-f]{2}[0-5u][0-9a-fu]",D="("+ssw.re.style+")?";if("-"==s)return[q_styling];if("Q"==s)return[x+"?"+h];if("Q-"==s)return[x+"?"+h+D];if("QT"==s)return[x+h];if("QT-"==s)return[x+h+D];var b=[],S=s.indexOf("T")+1;if(S){o="(A";var m=s.slice(0,S);if(s=s.replace(m,""),"QT"==m)o+="("+g+")+)";else if(r=m.match(new RegExp("("+F+"|"+d+")","g"))){var C;for(a=0;a<r.length;a+=1)(C=r[a].match(new RegExp(F)))?(f=C[0].slice(0,4),f+="u"==(u=C[0].slice(4,5))?"[0-5]":u,o+=f+="u"==(p=C[0].slice(5,6))?"[0-9a-f]":p):(i=r[a].slice(1,4),w=r[a].slice(5,8),o+=f="S"+ssw.range(i,w,"hex")+"[0-5][0-9a-f]");o+="("+g+")*)"}}if((r=s.match(new RegExp("(V[0-9]+)","g")))&&(e=1*r.toString().slice(1)),t=F+"([0-9]{3}x[0-9]{3})?",r=s.match(new RegExp(t,"g")))for(a=0;a<r.length;a+=1)f="S"+(n=r[a].toString()).slice(1,4),f+="u"==(u=n.slice(4,5))?"[0-5]":u,f+="u"==(p=n.slice(5,6))?"[0-9a-f]":p,n.length>6?(c=1*n.slice(6,9),l=1*n.slice(10,13),f+=ssw.range(c-e,c+e),f+="x",f+=ssw.range(l-e,l+e)):f+=Z,f=h+f+"("+g+Z+")*",f=S?o+f:x+"?"+f,s.indexOf("-")>0&&(f+=D),b.push(f);if(t=d+"([0-9]{3}x[0-9]{3})?",r=s.match(new RegExp(t,"g")))for(a=0;a<r.length;a+=1)i=(n=r[a].toString()).slice(1,4),w=n.slice(5,8),f="S"+ssw.range(i,w,"hex")+"[0-5][0-9a-f]",n.length>8?(c=1*n.slice(8,11),l=1*n.slice(12,15),f+=ssw.range(c-e,c+e),f+="x",f+=ssw.range(l-e,l+e)):f+=Z,f=h+f+"("+g+Z+")*",f=S?o+f:x+"?"+f,s.indexOf("-")>0&&(f+=D),b.push(f);return b.length||(s.indexOf("-")>0&&(f+=D),b.push(o+h)),b},regexu:function(s,e){if(!(s=ssw.queryu(s)))return"";var r,a,t,n,i,w,f,c,l;e||(e=20);var u,p=ssw.re.swu.symbol,o=ssw.re.swu.coord,g=ssw.re.swu.box+o+"("+p+o+")*",Z="("+ssw.re.swu.sort+"("+p+")+)",h="R"+p+p,x=p+"f?r?",d="("+o+")?",F="("+ssw.re.style+")?";if("-"==s)return ssw.re.style;if("Q"==s)return[ssw.re.swu.sign];if("Q-"==s)return[ssw.re.swu.sign+"("+ssw.re.style+")?"];if("QT"==s)return[ssw.re.swu.sort+ssw.re.swu.symbol+"+"+ssw.re.swu.box+ssw.re.swu.coord+"("+ssw.re.swu.spatial+")*"];if("QT-"==s)return[ssw.re.swu.sort+ssw.re.swu.symbol+"+"+ssw.re.swu.box+ssw.re.swu.coord+"("+ssw.re.swu.spatial+")*("+ssw.re.style+")?"];var D,b=[],S=s.indexOf("T")+1;if(S){u="("+ssw.re.swu.sort;var m=s.slice(0,S);if(s=s.replace(m,""),"QT"==m)u+="("+p+")+)";else if(r=m.match(new RegExp("("+x+"|"+h+")","g"))){var C;for(a=0;a<r.length;a+=1)(C=r[a].match(new RegExp("^"+x)))?u+=ssw.ranges(C[0]):(n=ssw.swu2fsw(r[a].slice(1,3)),i=ssw.swu2fsw(r[a].slice(-2)),n=ssw.fsw2swu(n.slice(0,4)+"00"),i=ssw.fsw2swu(i.slice(0,4)+"5f"),u+=ssw.rangeu(n,i));u+="("+p+")*)"}}if((r=s.match(new RegExp("(V[0-9]+)","g")))&&(e=1*r.toString().slice(1)),x+d,r=s.match(new RegExp("("+h+d+"|"+x+d+")","g")))for(a=0;a<r.length;a+=1)"R"!=(t=r[a].toString())[0]?(D=t.match(new RegExp(x))[0],f=ssw.ranges(D),D.length>t.length?(w=ssw.swu2fsw(t.slice(-4)).split("x"),c=w[0],l=w[1],f+=ssw.rangeu(ssw.fsw2swu(c-e+"x"+(c+e))),f+=ssw.rangeu(ssw.fsw2swu(l-e+"x"+(l+e)))):f+=o,f=g+f+"("+p+o+")*",f=S?u+f:Z+"?"+f,s.indexOf("-")>0&&(f+=F),b.push(f)):(t=r[a].toString(),n=ssw.swu2fsw(t.slice(1,3)),i=ssw.swu2fsw(t.slice(3,5)),n=ssw.fsw2swu(n.slice(0,4)+"00"),i=ssw.fsw2swu(i.slice(0,4)+"5f"),f=ssw.rangeu(n,i),t.length>5?(c=(w=ssw.swu2fsw(t.slice(5,9)).split("x"))[0],l=w[1],f+=ssw.rangeu(ssw.fsw2swu(c-e+"x"+(c+e))),f+=ssw.rangeu(ssw.fsw2swu(l-e+"x"+(l+e)))):f+=o,f=g+f+"("+p+o+")*",f=S?u+f:Z+"?"+f,s.indexOf("-")>0&&(f+=F),b.push(f));return b.length||(s.indexOf("-")>0&&(f+=F),b.push(u+g)),b},results:function(s,e,r){if(!e)return[];(-1==="BLMR".indexOf(r)||r.length>1)&&(r="");var a,t,n,i,w=ssw.regex(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a=w[f],e=(t=e.match(new RegExp(a,"g")))?t.join(" "):"";return e?(r&&(e=(e=(e=(e=e.replace(/B/g,r)).replace(/L/g,r)).replace(/M/g,r)).replace(/R/g,r)),i=(n=e.split(" ")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},resultsu:function(s,e,r){if(!e)return[];r&&!r.match(new RegExp(ssw.re.swu.box))&&(r="");var a,t,n,i,w=ssw.regexu(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a=w[f],e=(t=e.match(new RegExp(a,"g")))?t.join(" "):"";return e?(r&&(e=(e=(e=(e=e.replace(/\uD836\uDC01/g,r)).replace(/\uD836\uDC02/g,r)).replace(/\uD836\uDC03/g,r)).replace(/\uD836\uDC04/g,r)),i=(n=e.split(" ")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},lines:function(s,e,r){if(!e)return[];(-1==="BLMR".indexOf(r)||r.length>1)&&(r="");var a,t,n,i,w=ssw.regex(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a="^"+(a=w[f])+".*",e=(t=e.match(new RegExp(a,"mg")))?t.join("\n"):"";return e?(r&&(e=(e=(e=(e=e.replace(/B/g,r)).replace(/L/g,r)).replace(/M/g,r)).replace(/R/g,r)),i=(n=e.split("\n")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},linesu:function(s,e,r){if(!e)return[];r&&!r.match(new RegExp(ssw.re.swu.box))&&(r="");var a,t,n,i,w=ssw.regexu(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a="^"+(a=w[f])+".*",e=(t=e.match(new RegExp(a,"mg")))?t.join("\n"):"";return e?(r&&(e=(e=(e=(e=e.replace(/\uD836\uDC01/g,r)).replace(/\uD836\uDC02/g,r)).replace(/\uD836\uDC03/g,r)).replace(/\uD836\uDC04/g,r)),i=(n=e.split("\n")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},convert:function(s,e){var r,a="";if(ssw.sign(s)&&/^[Aa]?([Ss]L?)?$/.test(e)){var t,n,i="S[123][0-9a-f]{2}[0-5][0-9a-f]";if((e.indexOf("A")>-1||e.indexOf("a")>-1)&&(t=s.match(new RegExp("A("+i+")*","g"))))if(n=t[0],e.indexOf("A")>-1)a+=n+"T";else{for(t=n.match(new RegExp("S[123][0-9a-f]{2}","g")),a+="A",r=0;r<t.length;r+=1)a+=t[r]+"uu";a+="T"}if((e.indexOf("S")>-1||e.indexOf("s")>-1)&&(t=s.match(new RegExp(i+"[0-9]{3}x[0-9]{3}","g"))))for(r=0;r<t.length;r+=1)e.indexOf("S")>-1?a+=t[r].slice(0,6):a+=t[r].slice(0,4)+"uu",e.indexOf("L")>-1&&(a+=t[r].slice(6,13))}return a?"Q"+a:""},convertu:function(s,e){var r,a="";if(ssw.sign(s)&&/^[Aa]?([Ss]L?)?$/.test(e)){var t,n;if((e.indexOf("A")>-1||e.indexOf("a")>-1)&&(t=s.match(new RegExp(ssw.re.swu.sort+"("+ssw.re.swu.symbol+")*","g"))))if(n=t[0],e.indexOf("A")>-1)a+=n.replace(/\uD836\uDC00/g,"A")+"T";else{for(t=n.match(new RegExp(ssw.re.swu.symbol,"g")),a+="A",r=0;r<t.length;r+=1)a+=t[r]+"fr";a+="T"}if((e.indexOf("S")>-1||e.indexOf("s")>-1)&&(t=s.match(new RegExp(ssw.re.swu.symbol+ssw.re.swu.coord,"g"))))for(r=0;r<t.length;r+=1)e.indexOf("S")>-1?a+=t[r].slice(0,2):a+=t[r].slice(0,2)+"fr",e.indexOf("L")>-1&&(a+=t[r].slice(2,6))}return a?"Q"+a:""},paragraph:function(s){var e=ssw.chars(s);return'<span class="outside"><span class="middle"><span class="inside">'+(ssw.parse(s,e,!0).all||[]).map(function(s){"swu"==e&&(s=ssw.swu2fsw(s));var r=s.match(/Z([0-9]+(\.[0-9]+)?)/);r=r?parseFloat(r[1]):1;var a=ssw.bbox(s).split(" "),t=(a[1]-a[0])*r,n=(a[3]-a[2])*r,i=(1e3-a[0]-a[1])*r;i+=2,s.indexOf("L")>-1&&(i+=150),s.indexOf("R")>-1&&(i-=150);var w="width: "+t+"px;height: "+n+"px;";return i>0?w+="margin-right: "+i+"px;":i<0&&(w+="border-left: "+(i=-i)+"px solid transparent;"),'<div class="sign" style="'+w+'">'+ssw.svg(s,{copy:e})+"</div>"}).join("")+"</span></span></span>"}};
